ftp - протокол передачі даних з встановленням з"єднання, працює по TCP, 21 port
tftp - без встановлення з"єднання, по UDP
DHCP - по UDP


модель OSI:
	1. Фізичний рівень - метод передачі, середовище, метод кодування ...         
	2. Канальний (Data Link Layer): адресація в межах локальної мережі, перевірка цілісності даних, МАС-адреса, протокол Ethernet, РРР, HDLC   кадри
	3. мережевий рівень (network layer) - з"єднання ділянок мережі, маршрутизація, IPv4, IPv6                                                  пакети
	4. транспортний рівень (transport) - тут фснують порти, протоколи TCP, UDP                                                                 сегменти(tcp) датаграми(udp)
	5. Сеансовий (session) - встановлює, підтримує і розриває сеанс                                                                            PDU
	6. Рівень представлення (presentation layer) - структурує інф. в читабельний вигляд для приеладного рівня                                  PDU
	7. Прикладний (application layer) - email, ftp, http ...                                                                                   PDU (protocol data units) - дані
	
інкапсуляція - зверху вниз
деінкапсуляція - знизу вверх

стек TCP/IP:
	1. рівень мережевого доступу                фізичний + канальний                         mac
	2. інтернет                                 мережевий                                    ip
	3. транспортний                             транспортний                                 port
	4. прикладний                               сеансовий + представлення + прикладний       програма(браузер)
	
25 - smtp
110 - pop3
143 - imap
53 - dns
22 - ssh
23 - telnet
21 - ftp
80 - http
443 - https

ARP протокол - по ньому передається запит "who has" щоб дізнатись мак-адресу потрібного хоста
мас-адреса - 48 біт (12 символів), перших 24 - ідентифікатор організації(IUO)(присвоюється комітетом ІЕЕЕ) наступних 24 - призначається виробником

кадр:
8 байт    |6 bytes        | 6 bytes    | 2 bytes |46-1500 bytes  | 4 bytes        |
преамбула |мас отримувача |mac джерела | довжина |SNAP/LLC+ дані | FCS - checksum |

	преамбула - для вказання початку кадра
	довжина - вказує розмір поля дані
	SNAP/LLC - вказує якому вищому протоколу передати дані, дані
	checksum - визначає чи побитий кадр

ipv4 - 32bit
ipv6 - 128bit

розмір ІР пакета - до 20кБ
поля пакета:
	версія: ipv4, ipv6
	IHL: розмір заголовка
	тип обслуговування: QoS (вказує на вимоги до часу затримки, пропускної здатності ...)
	Довжина пакету: розмір всього пакету
	TTL - при кожному проходженні через маршрутизатор віднімається 1, еоли =0 - пакет відкидається
	Протокол: для якого вищого протоколу призначений
	Checksum заголовка: перевіряється цілісність заголовка
	Опції: викор. рідко для розширення основного заголовку (записуються дані для специфічного обладнання - розумний дім, IoT)
	Зміщення: вказує якому місцю належить фрагмент в оригінальному ІР (завжди кратне 8 байтам)
	Дані: дані з вищих рівнів
якщо пакет більший від кадра(може бути до 20КБ):
    Ідентифікатор: 4байти, які показують що всі розділені частиниє одним цілим
	Флаги: вказує що пакет фрагментований
	Зміщення фрагмента: зміщення відносно першого фрагмента, що допоможе зібрати пакет
	ІР-адреса отримувача
	ІР-адреса відправника
	
поля UDP датаграми:
	Порт джерела:
	Порт призначення:
	Довжина UDP
	Checksum: якщо порушена - відкидається без запиту повторної доставки
	Дані:
	
Поля TCP сегмента:
	Порт джерела
	Поля призначення
	Номер підтвердження: викор. коли очікується доставка або підтверджується доставка (параметр АСК)
	Зарезервований флаг (наприклад повідомлення про перегрузку мережі)
	Флаги: спец. біти для встановлення або розриву сесії
	розмір вікна: вказує на скільки сегментів вимагати підтвердження (чим якісніший зв"язок, тим менше підтверджень)
	Checksum
	Вказівник важливості
	Опції (наприклад Timestamp)
	Дані
	
маска мережі - для визнаення чи в одній мережі знаходяться хости, в масці спочатку йдуть 1 потім 0 (не чергуються)

класи мережі:
	А 0.0.0.0   - 127.255.255.255  маска 255.0.0.0  перший біт 0  net.host.host.host
	B 128.0.0.0 - 191.255.255.255        255.255.0.0           10 net.net.host.host
	C 192.0.0.0 - 223.255.255.255        255.255.255.0         110 net.net.net.host
	D 224.0.0.0 - 239.255.255.255     адреси зарезервовані для багатоадресної розсилки
	E 240.0.0.0 - 255.255.255.255
	
N + S + H = 32  N - к-ть біт мережі(А-8, В-16, С-24) S - к-ть біт взятих на підмережу (з хостової частини) Н - к-ть біт хостів
(2 в степені Н)-2= к-ть адрес під хости(доступних, міну броадкаст і адресу мережі)
N+S=маска
класова адресація - маска фіксована

адресовий простір - розділяє адреси на білі(public) і приватні(private) (безкласова адресація)
діапазони адрес під приватні мережі:
	10.0.0.0 — 10.255.255.255	(10/8)
	172.16.0.0 — 172.31.255.255 (172.16/12)
	192.168.0.0 — 192.168.255.255 (192.168/16)
зарезервовані адреси:
	0.0.0.0/8 - використовуються хостами для самоідентифікації(при звертанні до DHCP сервера хост ставить таку адресу як свою)
	127.0.0.0/8 — loopback або localhost
	169.254.0.0/16 — link-local address використовуються при недоступності DHCP, не маршрутизуються, з них не вийдеш в нет
	224.0.0.0/4 - під багатоадресну розсилку і мультикаст
	
unicast - одноцільова передача пакетів (трафік від джерела до конкретного ІР-призначення)
broadcast - (передача всім) використовується спеціальна адреса (255 як правило) щоб послати потік всім абонентам даної мережі
multicast - (групова передача пакетів) передається один потік багатьом адресам призначення - часто викор. для передачі потокового відео (IPTV), 
		     викор. спеціальний клас IP-адрес, це можуть бути адреси класа D (FF в ір6) для пошуку хостів, яким доставляти багатоцільові розсилки виеор. протоколи:IGMP -v4 MLD -v6
		різниця між multicast і broadcast - при мультикаст абонент вибирає приймати чи ні
		маршрутизатори викор. протокол IGMP для відслідковування стану груп розсилки
		
різниця між IPv4 і IPv6
	https://habrahabr.ru/post/210100/
	32 - 128 біт
	новий формат заголовка (40 байт)і можуть бути додаткові заголовки(декілька) ір4(20-60байт),
	циклічна адреса 127.0.0.1    ::1
	MTU максимальний блок передачі в байтах 576-ір4 1280-ір6
	більше місця під адресу (128 біт)
	можуть автоматично конфігуруватись навіть без DHCP сервера для зв"язку з адресами, отриманими з проксі-сервеів (link-local adresses)
	підтримка встроїної безпеки IPSec 
	краща підтримка QoS
	новий протокол Neighbor Discovery protocol - заміняє ARP
	в ICMPv6 додано ряд нових артибутів для підтримки NDP (замість ARP) і MLD
	непотрібен NAT (перетворення мережевих адрес)
	Легко розширюється (заголовок обмежений тільки розміром пакета а в ір4=40 байт)
	http://www.la-optic.narod.ru/ipv6.html
	https://www.ibm.com/support/knowledgecenter/ru/ssw_ibm_i_71/rzai2/rzai2compipv4ipv6.htm

VLAN - працює за протоеолом 802.1q, тут використовуються теговані кадри
	Access port - передає не таговані кадри, дивиться на хост(комп)
	Trunk port (магістральний) - передає таговані кадри, як правило піднімається між мережевими пристроями
тагований кадр - там вказується приналежність до певного канального середовища, наприклад до зазначеної підмережі
VLAN - незалежно від фізичного розположення можна логячно об"єднати вузли в групи, ізолюючи їх від інших (віртуальна мережа) - на прикладі пінга пояснити
VTP (VLAN Trunking Protocol) - для обміну інформацією про VLAN-и (на сервері налаштовуються влани, потім дані на клієнтах синхронізуються з сервером)

STP - протокол зв"язуючого дерева (щоб не було петлі, комутатори визначають між собою кореневий комутатор (root switch))
комутатори обмінюються BPDU кадрами, щоб визначити хто з них кореневий 

Динамічна маршрутизація - таблиці маршрутизації будуються автоматично за допомогою протоколів маршрутизації, при проблемах в мережі можуть автоматично перенастроюватись
	є з коробки балансування трафіка
	https://habrahabr.ru/post/156695/
	
	протоколи внутрішньої маршрутизації викор. всередині автономної системи, зовнішньої - для з"єднання автономних систем
	внутрішні протоколи:
		- Distance-Vector (RIP, EIGRP) таблиці маршрутизації, знає тільки 2 сусідів
		- Link State (OSPF, IS-IS) таблиці топології, має інформацію про всю мережу
	Administrative distance - число від 0 до 255, яке виражає міру довіри роутера до даного маршрута (чим менше AD тим більше довіри)
	
	https://habrahabr.ru/post/156695/
	OSPF - працює по ІР (тільки версія 4)
		щоб зв"язати 2 маршрутизатори потрібні виконатись такі умови:
			1. однакові Hello Interval (19=0 секунд) - як часто відправляється Hello пакет сусідові
			2. однакові Dead Interval = 4*Hello Interval, якщо не отримується Hello від сусіда то починається перебудова локальної БД
			3. інтерфейси повинні бути в одній підмережі
			4. повинні співпадати номера зони (OSPF дозволяє ділити систему на зони)
			5. співпадає розмір MTU
		маршрутизатори виконують такі дії:
			- хелло пакети на мультикастову адресу (TTL=1, тому їх отримають маршрутизатори тільки в даній підмережі)(Router ID, Hello interval, Dead interval, Сусіди, маска, Area ID,
				router priority, адреси DR і BDR маршрутизаторів, пароль)
			- дружба (коли маршрутизатори знаходять себе в отриманому списку сусідів)
			- вибирають головного маршрутизатора
			- обмінюються даними про стан лінків LSDB
			- отримують інфу про невідомі лінки
			- формують однакову LSDB
			- вираховують найкоротший(найдешевший) шлях до кожного маршрутизатора
			- кожних 10 сек хелло пакети, кожні 30 хв LSA
			- при падінні лінка маршрутизатор формує LSDB і розсилає LSU з вищим номером ніж в останній LSA і всі оновлюють дані
	
	https://www.cisco.com/cisco/web/support/RU/9/92/92088_eigrp-toc.html
	http://www.netconfig.org/routing/eigrp/710/
	EIGRP (Enhanced Interior Gateway Routing Protocol)- дистанційно-векторний протокол
		переваги:
			- низьке споживання мережевих ресурсів
			- при виникненні змін, передаються тільки зміни в таблиці маршрутизації а не вся таблиця
			- малий час конвергенції у випадку зміни в топології мережі
		типи пакетів:
			- HELLO (кожні 5 сек)для виявлення сусідів, і тестування, використ. мультикаст розсилка на 224.0.0.10
			- Acknowledgment - для підтвердження отримання пакетів update, query, replу, відправлються юнікастом і містять acknowledgment number
			- Update - інформація про зміну маршрутів, може викор. мультикаст і юнікаст
			- Query (пакети запитів) - якщо маршрутизатор перераховує маршрут і в нього немає резервного, то він надсилає запит Query, якщо сусід має такий маршрут, то відповідає пакетом
			  reply, якщо не має, то відправляє своїм сусідам
			- Reply (пакет відповіді на запити)
		Для гарантії отримання повідомлень викор. протокол гарантії доставки RTP
		Таблиця сусідніх пристроїв neighbor table - в ній перечислені машрутизатори, які безпосередньо підключені до даного маршрутизатора (сусіди)
		якщо протягом 3-х хелло інтервалів не прийшла відповідь, то маршрутизатор вважається недоступним
		кількість переходів в EIGRP дор. 224
		Successor - маршрутизатор, через який проходить оптимальний маршрут
		Feasible Successor - резервний маршутизатор, який викор., якщо виходить з ладу Successor
		Feasible distance - метрика для маршруту в певну мережу
		Reported distance(RD) або Advertised distance (AD) - метрика для маршруту в мережу для того маршрутизатора, який заявляє про даний маршрут
		
	http://www.netconfig.org/routing/rip/355/
	RIP (Routing Information Protocol) - дистанційно-векторний протокол маршрутизації
		- в якості метрик при виборі маршрута використовує кількість переходів (хопи)
		- якщо кількість переходів більеш 15, то пакет відкидається
		- по замовчуванні оновлення маршрутизації (routing updates) розсилаються броадкастом кожні 30 сек.
		- при зміні конфігурації (при оновленні таблиці маршрутизації) росилка оновлення відбувається миттєво
		маршрутизатори записують тільки найкращий маршрут(або декілька, якщо в них однакові метрики)